import{j as e,Q as q,S as z,T as H,a as C,U as K,a8 as B,L as Y,r as u,b as J,d as W,f as X,i as Z,e as b,m as N,l as ee,s as y,x as ae,a9 as te,aa as se,N as re,ab as ne,ac as oe,ad as ie,ae as le,af as h}from"./index-BoU8ccGb.js";import{c as L,R as ce,I as de,P as ue}from"./index-BcDbqVr4.js";import{C as xe}from"./cat-BHJ188jt.js";function me({ride:a}){return e.jsxs(q,{className:"shadow-md hover:shadow-lg transition-shadow",children:[e.jsxs(z,{className:"flex flex-col gap-2",children:[e.jsxs(H,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-blue-600"}),a.pickUpLocation?.address]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx(C,{className:"h-4 w-4 text-red-600"})," ",a.dropOffLocation?.address]})]}),e.jsxs(K,{className:"flex flex-col gap-2 h-full justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xe,{className:"h-4 w-4 text-green-600"})," ",a.fare.toFixed(2)," tk"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"h-4 w-4 text-gray-500"})," ",new Date(a.requestedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex w-full justify-between items-center pt-3",children:[e.jsx("div",{className:`text-sm font-semibold px-2 py-1 inline-block rounded ${a.status==="REQUESTED"?"bg-yellow-100 text-yellow-800":a.status==="IN_TRANSIT"?"bg-blue-100 text-blue-800":a.status==="ACCEPTED"?"bg-violet-100 text-sky-800":"bg-green-100 text-green-800"}`,children:a.status.replace("_"," ")}),e.jsx(Y,{to:`/ride/ride-info/${a._id}`,className:"px-3 py-1 text-sm font-mono bg-sky-200 rounded-md shadow",children:"View"})]})]})]},a._id)}var p="Tabs",[ge,Le]=X(p,[L]),S=L(),[fe,T]=ge(p),R=u.forwardRef((a,t)=>{const{__scopeTabs:s,value:o,onValueChange:r,defaultValue:d,orientation:n="horizontal",dir:x,activationMode:g="automatic",...f}=a,c=J(x),[i,m]=W({prop:o,onChange:r,defaultProp:d??"",caller:p});return e.jsx(fe,{scope:s,baseId:Z(),value:i,onValueChange:m,orientation:n,dir:c,activationMode:g,children:e.jsx(b.div,{dir:c,"data-orientation":n,...f,ref:t})})});R.displayName=p;var I="TabsList",E=u.forwardRef((a,t)=>{const{__scopeTabs:s,loop:o=!0,...r}=a,d=T(I,s),n=S(s);return e.jsx(ce,{asChild:!0,...n,orientation:d.orientation,dir:d.dir,loop:o,children:e.jsx(b.div,{role:"tablist","aria-orientation":d.orientation,...r,ref:t})})});E.displayName=I;var P="TabsTrigger",D=u.forwardRef((a,t)=>{const{__scopeTabs:s,value:o,disabled:r=!1,...d}=a,n=T(P,s),x=S(s),g=k(n.baseId,o),f=M(n.baseId,o),c=o===n.value;return e.jsx(de,{asChild:!0,...x,focusable:!r,active:c,children:e.jsx(b.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":f,"data-state":c?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:g,...d,ref:t,onMouseDown:N(a.onMouseDown,i=>{!r&&i.button===0&&i.ctrlKey===!1?n.onValueChange(o):i.preventDefault()}),onKeyDown:N(a.onKeyDown,i=>{[" ","Enter"].includes(i.key)&&n.onValueChange(o)}),onFocus:N(a.onFocus,()=>{const i=n.activationMode!=="manual";!c&&!r&&i&&n.onValueChange(o)})})})});D.displayName=P;var _="TabsContent",he=u.forwardRef((a,t)=>{const{__scopeTabs:s,value:o,forceMount:r,children:d,...n}=a,x=T(_,s),g=k(x.baseId,o),f=M(x.baseId,o),c=o===x.value,i=u.useRef(c);return u.useEffect(()=>{const m=requestAnimationFrame(()=>i.current=!1);return()=>cancelAnimationFrame(m)},[]),e.jsx(ee,{present:r||c,children:({present:m})=>e.jsx(b.div,{"data-state":c?"active":"inactive","data-orientation":x.orientation,role:"tabpanel","aria-labelledby":g,hidden:!m,id:f,tabIndex:0,...n,ref:t,style:{...a.style,animationDuration:i.current?"0s":void 0},children:m&&d})})});he.displayName=_;function k(a,t){return`${a}-trigger-${t}`}function M(a,t){return`${a}-content-${t}`}var be=R,pe=E,ve=D;function je({className:a,...t}){return e.jsx(be,{"data-slot":"tabs",className:y("flex flex-col gap-2",a),...t})}function Ne({className:a,...t}){return e.jsx(pe,{"data-slot":"tabs-list",className:y("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function A({className:a,...t}){return e.jsx(ve,{"data-slot":"tabs-trigger",className:y("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function ye({tab:a,handleTabChange:t}){return e.jsx("div",{className:"py-4 w-fit mx-auto",children:e.jsx(je,{value:a,onValueChange:t,children:e.jsxs(Ne,{className:"grid grid-cols-2 w-full max-w-xs",children:[e.jsx(A,{value:"my",children:"Your rides"}),e.jsx(A,{value:"all",children:"All rides"})]})})})}function Se(){const[a,t]=u.useState(1),[s,o]=u.useState(""),[r,d]=u.useState(""),[n,x]=u.useState("my"),g=5,{data:f,isLoading:c}=ae(),i=f?.data?.role,{data:m,isLoading:F}=te({page:a,limit:g,search:s,status:r}),{data:v,isLoading:V}=se({page:a,limit:g,search:s,status:r}),U=Array.isArray(v?.data?.data)?v.data.data:[],$=Array.isArray(m?.data?.data)?m.data.data:[],j=(i==="ADMIN"&&n==="all"?U:$).filter(l=>{const Q=l.pickUpLocation?.address.toLowerCase().includes(s.toLowerCase())||l.dropOffLocation?.address.toLowerCase().includes(s.toLowerCase())||l.driverUserName?.toLowerCase().includes(s.toLowerCase())||l.riderUserName?.toLowerCase().includes(s.toLowerCase()),O=r==="ALL"||!r?!0:l.status===r;return Q&&O}),w=i==="ADMIN"&&n==="all"?v?.data?.meta:m?.data?.meta;u.useEffect(()=>{const l=setTimeout(()=>{t(1)},400);return()=>clearTimeout(l)},[s]);const G=l=>{x(l)};return e.jsxs("div",{className:"container mx-auto p-4 py-30 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Your Ride History"}),i==="ADMIN"&&e.jsx(ye,{tab:n,handleTabChange:G}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[e.jsx(re,{placeholder:"Search by rides",value:s,onChange:l=>o(l.target.value),className:"flex-1"}),e.jsxs(ne,{onValueChange:d,value:r,className:"w-48",children:[e.jsx(oe,{children:e.jsx(ie,{placeholder:"Filter by status"})}),e.jsxs(le,{children:[e.jsx(h,{value:"ALL",children:"All"}),e.jsx(h,{value:"REQUESTED",children:"Requested"}),e.jsx(h,{value:"CANCELLED",children:"Cancelled"}),e.jsx(h,{value:"ACCEPTED",children:"Accepted"}),e.jsx(h,{value:"IN_TRANSIT",children:"In Transit"}),e.jsx(h,{value:"COMPLETED",children:"Completed"})]})]})]}),(F||c||V)&&e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-30",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading ..."})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.length>0?j.map(l=>e.jsx(me,{ride:l},l._id)):e.jsx("p",{className:"text-gray-500 col-span-full text-center",children:"No rides found."})}),e.jsx("div",{className:"w-full mx-auto",children:j.length>0&&e.jsx(ue,{currentPage:a,itemsPerPage:g,totalPages:w?.totalPage||1,meta:w,setCurrentPage:t})})]})}export{Se as default};
