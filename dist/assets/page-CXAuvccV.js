import{j as e,S as Q,U,V as q,a as S,W as z,aa as H,L as K,r as d,b as O,d as B,f as Y,i as W,e as b,m as T,l as J,s as N,x as X,ab as Z,ac as ee,Q as ae,ad as te,ae as se,af as ne,ag as re,ah as v,ai as oe}from"./index-dxRg2PLE.js";import{c as A,R as ie,I as le,P as ce}from"./index-B7Nxn0aj.js";import{C as de}from"./cat-B8wNhTnE.js";function ue({ride:a}){return e.jsxs(Q,{className:"shadow-md hover:shadow-lg transition-shadow",children:[e.jsxs(U,{className:"flex flex-col gap-2",children:[e.jsxs(q,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-blue-600"}),a.pickUpLocation?.address]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx(S,{className:"h-4 w-4 text-red-600"})," ",a.dropOffLocation?.address]})]}),e.jsxs(z,{className:"flex flex-col gap-2 h-full justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"h-4 w-4 text-green-600"})," ",a.fare.toFixed(2)," tk"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"h-4 w-4 text-gray-500"})," ",new Date(a.requestedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex w-full justify-between items-center pt-3",children:[e.jsx("div",{className:`text-sm font-semibold px-2 py-1 inline-block rounded ${a.status==="REQUESTED"?"bg-yellow-100 text-yellow-800":a.status==="IN_TRANSIT"?"bg-blue-100 text-blue-800":a.status==="ACCEPTED"?"bg-violet-100 text-sky-800":"bg-green-100 text-green-800"}`,children:a.status.replace("_"," ")}),e.jsx(K,{to:`/ride/ride-info/${a._id}`,className:"px-3 py-1 text-sm font-mono bg-sky-200 rounded-md shadow",children:"View"})]})]})]},a._id)}var p="Tabs",[xe,Ce]=Y(p,[A]),R=A(),[ge,y]=xe(p),I=d.forwardRef((a,t)=>{const{__scopeTabs:i,value:r,onValueChange:n,defaultValue:c,orientation:s="horizontal",dir:u,activationMode:x="automatic",...f}=a,l=O(u),[o,g]=B({prop:r,onChange:n,defaultProp:c??"",caller:p});return e.jsx(ge,{scope:i,baseId:W(),value:o,onValueChange:g,orientation:s,dir:l,activationMode:x,children:e.jsx(b.div,{dir:l,"data-orientation":s,...f,ref:t})})});I.displayName=p;var E="TabsList",P=d.forwardRef((a,t)=>{const{__scopeTabs:i,loop:r=!0,...n}=a,c=y(E,i),s=R(i);return e.jsx(ie,{asChild:!0,...s,orientation:c.orientation,dir:c.dir,loop:r,children:e.jsx(b.div,{role:"tablist","aria-orientation":c.orientation,...n,ref:t})})});P.displayName=E;var D="TabsTrigger",_=d.forwardRef((a,t)=>{const{__scopeTabs:i,value:r,disabled:n=!1,...c}=a,s=y(D,i),u=R(i),x=M(s.baseId,r),f=F(s.baseId,r),l=r===s.value;return e.jsx(le,{asChild:!0,...u,focusable:!n,active:l,children:e.jsx(b.button,{type:"button",role:"tab","aria-selected":l,"aria-controls":f,"data-state":l?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:x,...c,ref:t,onMouseDown:T(a.onMouseDown,o=>{!n&&o.button===0&&o.ctrlKey===!1?s.onValueChange(r):o.preventDefault()}),onKeyDown:T(a.onKeyDown,o=>{[" ","Enter"].includes(o.key)&&s.onValueChange(r)}),onFocus:T(a.onFocus,()=>{const o=s.activationMode!=="manual";!l&&!n&&o&&s.onValueChange(r)})})})});_.displayName=D;var k="TabsContent",me=d.forwardRef((a,t)=>{const{__scopeTabs:i,value:r,forceMount:n,children:c,...s}=a,u=y(k,i),x=M(u.baseId,r),f=F(u.baseId,r),l=r===u.value,o=d.useRef(l);return d.useEffect(()=>{const g=requestAnimationFrame(()=>o.current=!1);return()=>cancelAnimationFrame(g)},[]),e.jsx(J,{present:n||l,children:({present:g})=>e.jsx(b.div,{"data-state":l?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":x,hidden:!g,id:f,tabIndex:0,...s,ref:t,style:{...a.style,animationDuration:o.current?"0s":void 0},children:g&&c})})});me.displayName=k;function M(a,t){return`${a}-trigger-${t}`}function F(a,t){return`${a}-content-${t}`}var fe=I,ve=P,be=_;function pe({className:a,...t}){return e.jsx(fe,{"data-slot":"tabs",className:N("flex flex-col gap-2",a),...t})}function he({className:a,...t}){return e.jsx(ve,{"data-slot":"tabs-list",className:N("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function L({className:a,...t}){return e.jsx(be,{"data-slot":"tabs-trigger",className:N("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function je({tab:a,handleTabChange:t}){return e.jsx("div",{className:"py-4 w-fit mx-auto",children:e.jsx(pe,{value:a,onValueChange:t,children:e.jsxs(he,{className:"grid grid-cols-2 w-full max-w-xs",children:[e.jsx(L,{value:"my",children:"Your rides"}),e.jsx(L,{value:"all",children:"All rides"})]})})})}function we(){const[a,t]=d.useState(1),[i,r]=d.useState(""),[n,c]=d.useState("ALL"),[s,u]=d.useState("my"),x=3,{data:f,isLoading:l}=X(),o=f?.data?.role,{data:g,isLoading:V}=Z({page:a,limit:x,search:i||void 0,status:n!=="ALL"?n:void 0}),{data:C,isLoading:$}=ee({page:a,limit:x,search:i||void 0,status:n!=="ALL"?n:void 0}),h=o==="ADMIN"&&s==="all"?C?.data?.data||[]:g?.data?.data||[],w=o==="ADMIN"&&s==="all"?C?.data?.meta:g?.data?.meta;d.useEffect(()=>{const m=setTimeout(()=>{t(1)},400);return()=>clearTimeout(m)},[i,n,s]);const G=m=>{u(m),t(1)},j=l||V||$;return e.jsxs("div",{className:"container mx-auto p-4 py-30 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Your Ride History"}),o==="ADMIN"&&e.jsx(je,{tab:s,handleTabChange:G}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[e.jsx(ae,{placeholder:"Search by rider, driver, name or status",value:i,onChange:m=>r(m.target.value),className:"flex-1"}),e.jsxs(te,{onValueChange:c,value:n,className:"w-48",children:[e.jsx(se,{children:e.jsx(ne,{placeholder:"Filter by status"})}),e.jsxs(re,{children:[e.jsx(v,{value:"ALL",children:"All"}),e.jsx(v,{value:"REQUESTED",children:"Requested"}),e.jsx(v,{value:"CANCELLED",children:"Cancelled"}),e.jsx(v,{value:"ACCEPTED",children:"Accepted"}),e.jsx(v,{value:"IN_TRANSIT",children:"In Transit"}),e.jsx(v,{value:"COMPLETED",children:"Completed"})]})]})]}),j&&e.jsx(oe,{}),!j&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.length>0?h.map(m=>e.jsx(ue,{ride:m},m._id)):e.jsx("p",{className:"text-gray-500 col-span-full text-center",children:"No rides found."})}),!j&&h.length>0&&e.jsx(ce,{currentPage:a,itemsPerPage:x,totalPages:w?.totalPage||1,meta:w,setCurrentPage:t})]})}export{we as default};
